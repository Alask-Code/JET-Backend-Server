var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=b.length,g=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var f=0;f<g&&c<e;)if(b[c++]!=a[f++])return!1;return f>=g}},"es6","es3");
var debugSessionEnabled,debugSession,ConsoleResponse=function(){var a=this;debugSessionEnabled=!1;debugSession="";this.readline=require("readline");this.rl=this.readline.createInterface({input:process.stdin,output:process.stdout});this.rl.on("line",function(b){if(b.startsWith("/")&&(b=b.substring(1),b=b.split(" "),"undefined"!=typeof a.commands[b[0]]))a.commands[b[0]](b)});this.commands={restart:this.resetServer,register:this.registerAccount,info:this.displayInfo,help:this.displayInfo,h:this.displayInfo,
addItem:this.addItem,devSession:this.setDebugSession};this.commandsInfo={restart:"restarting the server softly",register:"( /register login editionNumber password ) - edition & password not required",info:"",addItem:"( /addItem MySession TemplateId Amount)",devSession:"( /devSession true MySessionToChange ) "};this.commandsInfo.help==this.commandsInfo.info;this.commandsInfo.h==this.commandsInfo.info};ConsoleResponse.prototype.getSession=function(){return debugSession};
ConsoleResponse.prototype.getDebugEnabled=function(){return debugSessionEnabled};ConsoleResponse.prototype.addCommand=function(a,b){this.commands[a]=b};ConsoleResponse.prototype.removeCommand=function(a){delete this.commands[a]};ConsoleResponse.prototype.setDebugSession=function(a){var b=a[2];debugSessionEnabled=a[1];debugSession=b;console.log("Dev Session Handler: "+debugSessionEnabled+" - "+debugSession)};
ConsoleResponse.prototype.addItem=function(a){var b=a[1];a={items:[{item_id:a[2],count:a[3]}],tid:""};var c=profile_f.handler.getPmcProfile(b);move_f.addItem(c,a,b,!0);savehandler_f.saveOpenSessions();logger.logInfo("Item added: "+a.items[0].item_id+" count:"+a.items[0].count+" session:"+b)};ConsoleResponse.prototype.resetServer=function(a){logger.logRequest("Restart Started!");server.softRestart();logger.logSuccess("Restart Completed")};
ConsoleResponse.prototype.displayInfo=function(){for(var a in this.commandsInfo)logger.logRequest(a+" -> "+this.commandsInfo[a])};
ConsoleResponse.prototype.registerAccount=function(a){logger.logRequest("Requesting account creation with data:");var b=a[1],c="Standard",d="";if(3<=a.length)switch(a[2]){case "1":c="Prepare To Escape";break;case "2":c="Left Behind";break;case "3":c="Edge Of Darkness"}4==a.length&&(d=a[3]);logger.logRequest('Login: "'+b+'", Password: "'+d+'", Edition: "'+c+'"');account_f.handler.register({email:b,password:d,edition:c})};exports.consoleResponse=new ConsoleResponse;